<%- include('../partials/head.ejs') %>
    <body>
        <%- include('../partials/header.ejs') %>
        <%- include('../partials/navBrands.ejs') %>
        <main class="mainCreateProduct">
            <section class="cuerpoCreateProduct">
                <h1>Crear Producto</h1>
                <form class="formularioCreateProduct" action="/products/save" method="post" enctype="multipart/form-data">
                    <section>
                        <input type="text" id="name" name="name" placeholder="Nombre del producto" value="<%= locals.old ? old.name : '' %>">
                        <input type="number" id="price" name="price" placeholder="Precio del producto" value="<%= locals.old ? old.price : '' %>">
                    </section>
                    <% if (locals.errors) { %>
                        <% if (errors.name) { %>
                            <div class="divError">
                                <%= errors.name.msg %>
                            </div>
                        <% } %>
                        <% if (errors.price) { %>
                            <div class="divError">
                                <%= errors.price.msg %>
                            </div>
                        <% } %>
                    <% } %>
                    <section>
                        <input type="text" id="detail" name="detail" placeholder="Descripción del producto" value="<%= locals.old ? old.detail : '' %>"></input>
                    </section>
                    <% if (locals.errors && errors.detail) { %>
                        <div class="divError">
                            <%= errors.detail.msg %>
                        </div>
                    <% } %>
                    <section>
                        <label>Selecciona la marca:</label>
                        <select name="brand" required>
                            <% for( const brand of brands) { %>
                                <option value="<%= brand.id %>"> <%= brand.name %> </option>                        
                            <% } %>
                        </select>
                    </section>
                    <section>
                        <label>Selecciona la categoría:</label>
                        <select name="category" required>
                            <% for( const category of categories) { %>
                                <option value="<%= category.id %>"> <%= category.name %> </option>
                            <% } %>              
                        </select>
                    </section>    
                    <div class="createProductFotosUpload">
                        <p>Foto/s del Producto</p>
                        <label for="image">
                            <i class="fa-solid fa-cloud-arrow-up"></i>
                        </label>
                        <input type="file" id="image" name="image"/>
                    </div>
                    <% if (locals.errors && errors.image) { %>
                        <div class="divError">
                            <%= errors.image.msg %>
                        </div>
                    <% } %>
                    <section>
                        <button type="submit">Crear</button>
                        <button type="reset">Borrar datos</button>
                    </section>
                </form>
            </section>
        </main>
        <%- include('../partials/navBrands.ejs') %>
        <%- include('../partials/footer.ejs') %>
    </body>
</html>